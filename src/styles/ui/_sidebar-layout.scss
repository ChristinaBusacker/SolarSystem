/* ------------------------------------------------------------
   Sidebars (layout containers)
------------------------------------------------------------ */

@use "../tokens" as t;

.sidebar-root {
  position: relative;
  flex: 0 0 auto;
  height: 100%;
  overflow: hidden;
  will-change: width, height, transform;
  transition:
    width t.$dur-slow t.$ease-standard,
    height t.$dur-slow t.$ease-standard,
    transform t.$dur-slow t.$ease-standard;
}

// Desktop widths
#sidebar-left-root {
  width: min(340px, 88vw);
}

#sidebar-right-root {
  width: min(420px, 92vw);
}

#sidebar-left-root.is-closed,
#sidebar-right-root.is-closed {
  width: 0;
}

#sidebar-left-slot,
#sidebar-right-slot {
  position: relative;
  height: 100%;
}

@media (prefers-reduced-motion: reduce) {
  .sidebar-root {
    transition: none;
  }
}

// Mobile behavior
@media (max-width: t.$bp-mobile) {
  #layout {
    flex-direction: column;
  }

  #scene-root {
    flex: 1 1 auto;
  }

  // Right sidebar becomes a bottom sheet.
  #sidebar-right-root {
    width: 100%;
    height: min(52vh, 520px);
    border-left: 0;
  }

  #sidebar-right-root.is-closed {
    height: 0;
    width: 100%;
  }

  // Left sidebar becomes a full-screen overlay.
  #sidebar-left-root {
    position: absolute;
    inset: 0;
    z-index: t.$z-sidebar-overlay;
    width: 100%;
    height: 100%;
    transform: translateX(-100%);
  }

  #sidebar-left-root.is-open {
    transform: translateX(0);
  }

  #sidebar-left-root.is-closed {
    transform: translateX(-100%);
    width: 100%;
  }
}
